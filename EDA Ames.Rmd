---
title: "DS311  EDA"
author: "Gabrielle Salamanca"
date: "April 23, 2023"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Load the Dataset

First, let's call the necessary libraries:

```{r}
library(readr)
library(tibble)
```

Now, let's load the data and check if it loaded correctly:

```{r}
# data
ames <- read_csv("data/ames.csv", show_col_types = FALSE, col_types = cols())

# checking
if (!is.data.frame(ames)) {
  stop("ames is not a dataframe.")
}

if (nrow(ames) != 1460) {
  stop("ames does not have the correct number of rows.")
}

if (ncol(ames) != 81) {
  stop("ames does not have the correct number of columns.")
}
```

Let's inspect the contents of the dataframe

```{r}
# inspect
ames
str(ames)
```

## Explore Data Distributions

### 1. Sale Price

```{r}
ames.hist <- function(ames, column, title, xlabel, ylabel) 
{
  data <- ames[[column]]
  mean <- mean(data)
  hist(data, breaks = "FD", main = title, xlab = xlabel, ylab = ylabel, col = "darkmagenta")
  abline(v = mean, col = "goldenrod1")
}
# call function
ames.hist(ames, "SalePrice", "Distribution of Sale Prices", "Sale Price", "Number of Houses")
```

```{r}
mean <- mean(ames$SalePrice)
med <-  median(ames$SalePrice)
stdev <- sd(ames$SalePrice)
# print
cat("Mean: $", mean, "\n")
cat("Median: $", med, "\n")
cat("Standard Dev: $", stdev)
```

We see that the distribution looks like a log normal. It seems most of the houses cluster around 163000 USD. However, the higher-end homes are pulling up the average to 180921.2 USD.

### 2. Total Rooms Above Grade

```{r}
ames.hist(ames, "TotRmsAbvGrd", 
          "Distribution of Total Rooms Above Grade", 
          "Total Rooms (Does Not Include Bathrooms)",
          "Number of Houses")
```

```{r}
mean <- mean(ames$TotRmsAbvGrd)
med <-  median(ames$TotRmsAbvGrd)
stdev <- sd(ames$TotRmsAbvGrd)
# print
cat("Mean:", mean, "\n")
cat("Median:", med, "\n")
cat("Standard Dev:", stdev)
```

We see in the histogram that the number of rooms in houses is approximately normally distributed. There's an average and median of around 6 rooms, but there are some houses double the mean. But overall, the distribution is less skewed than the sale price one.

### 3. Overall Condition

```{r}
ames.hist(ames, "OverallCond",
          "Distribution of Overall Condition of Houses on a 1-10 Scale",
          "Condition of House", "Number of Houses")
# vars
mean <- mean(ames$OverallCond)
med <-  median(ames$OverallCond)
stdev <- sd(ames$OverallCond)
```

```{r}
# print
cat("Mean:", mean, "\n")
cat("Median:", med, "\n")
cat("Standard Dev:", stdev)
```


Most homes have a condition of 5, but perhaps we should treat this as a categorical variable than numeric. This is because the difference between conditions are quite enormous.

## Explore Differences between Subsets

```{r}
below <- ames[ames$OverallCond < 5, ]
avg <- ames[ames$OverallCond == 5, ]
above <- ames[ames$OverallCond > 5, ]

# Create custom bins so all are on the same scale
bins <- seq(min(ames$SalePrice), max(ames$SalePrice), length.out = 21)

# plot setup
par(mfrow = c(1, 1))
plot.new()
legend_x <- "topright"
legend_title <- "Condition"
legend_colors <- c("cyan", "gray", "yellow")
legend_labels <- c("above average", "average", "below average")

# Plot
hist(above$SalePrice, col = legend_colors[1],
     breaks = bins, xlim = c(min(ames$SalePrice), max(ames$SalePrice)),
     ylim = c(0, max(hist(ames$SalePrice, breaks = bins)$counts)),
     main = "Distributions of Sale Price Grouped by Condition",
     xlab = "Sale Price",
     ylab = "Number of Houses", freq = FALSE)
hist(avg$SalePrice, col = legend_colors[2],
     breaks = bins, add = TRUE, freq = FALSE)
hist(below$SalePrice, col = legend_colors[3],
     breaks = bins, add = TRUE, freq = FALSE)

# Add legend
legend(legend_x, legend_labels, fill = legend_colors, title = legend_title)

```


## Explore Correlations

## Engineer and Explore a New Feature
